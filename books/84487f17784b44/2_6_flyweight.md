---
title: "2_6_Flyweightパターン"
---

# 「蜂の巣で働くハチたちが効率よく花の蜜を集める物語」

![](/images/20230327_gof/A_vibrant_meadow_filled_with_colorful_flowers_as_bees_of.png)
*色とりどりの花が咲き乱れる鮮やかな草原で、さまざまな種類のミツバチが協力して効率よく蜜を集め、繁栄するミツバチの巣の調和に貢献しています。*

## ビーハイブ（The Beehive）

色とりどりの花が咲き乱れる美しい草原で、木に吊るされた蜂の巣が鳴いていました。蜂の巣は、蜂蜜を作るために花の蜜を集めるために、数え切れないほどの働き者の蜂が住んでいました。蜂の巣を維持するために、効率よく蜜を集める仕組みが必要でした。

## ミツバチ工場

```python
class Bee：
    def __init__(self, species)：
        self.species = species

    def collect_nectar(self, flower)：
        print(f"{self.species} ハチが{flower}花から蜜を集めている")

class BeeFactory：
    _bees = dict()

    def get_bee(self, species)：
        if species not in self._bees：
            self._bees[species] = Bee(species)
        return self._bees[species]

bee_factory = BeeFactory()
```

ミツバチの巣には、さまざまな種類のミツバチを作り出す「ビーファクトリー」という独自のシステムがありました。資源を節約するために、1種類の蜂が1匹しか生まれないようにしていたのです。

## ハチミツの収集

```python
flowers = ["バラ", "チューリップ", "ヒマワリ", "ヒナギク"]。

for flower in flowers：
    bee = bee_factory.get_bee("蜜")
    bee.collect_nectar(flower)
```


ミツバチは、メアドウにあるさまざまな花から蜜を集める役割を担っていました。ビーファクトリーは、花の種類ごとにミツバチを割り当てました。そして、ミツバチはその花から蜜を集め、蜂の巣に持ち帰るのです。これにより、ミツバチはフライウェイトパターンを使って、ミツバチの種類などの共通属性を共有し、同じ種類のミツバチを複数作らないようにして、効率的に働くことができました。

## チームワークとリソースの共有

ミツバチたちは、蜜を集める花の情報を共有し、資源を無駄にしないように協力し合っていました。フライウェイトパターンによって、ミツバチはエネルギーと時間を最適化し、必要な仕事に集中することができました。

```python
for flower in flowers：
    bee = bee_factory.get_bee("bumble")
    bee.collect_nectar(flower)
```

同様に、ビーファクトリーでは、花の種類ごとにマルハナバチを割り当てました。また、蜜を効率よく集めてハチの巣に持ち帰り、コロニー全体の成功に貢献しました。

## 繁栄する巣箱

ミツバチが熱心に働き、フライウェイトパターンを使用した結果、ミツバチの巣は繁栄しました。ミツバチは豊富なハチミツを生産し、コロニーはより強く成長し続けました。草原は、ミツバチたちの調和のとれた協力のおかげで、生き生きとした色彩を保っていました。

この物語で、フライウェイト・パターンは、効率的で資源を節約した方法でミツバチを作り、管理するビーファクトリーの能力で表現されています。同じ種類の蜂を再利用することで、蜂の巣は活力を保ち、コロニーの貴重なエネルギーと時間を、蜜の収集や蜂蜜の生産といった必要な仕事に向けることができます。