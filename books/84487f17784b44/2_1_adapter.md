---
title: "2.1 Adapterパターン"
---

# 「アダプタパターンで調和するジャングル」

![](/images/20230327_gof/A_diverse_group_of_animals_gathers_around_a_water_source.jpg)
*ジャングルの水源に集まる多様な動物たちが、生命力あふれる水を飲み、分かち合うために調和しています。*
## ジャングルのジレンマ

昔々、うっそうとしたジャングルの中で、さまざまな動物たちが仲良く暮らしていました。動物たちは、それぞれの違いを感じながらも共存し、困ったときには助け合いながら暮らしていました。ある日、ジャングルは干ばつに見舞われ、動物たちは水のぶん配システムを作ることにしました。

## アダプタパターンが窮地を救う

```python
# 既存インターフェース
class Animal:
    # 動物インターフェイスクラス

    def drink(self, water):
        # 提供された水を飲む
        pass

#  新しいインターフェース
class WaterSource:
    # 水源クラス

    def provide_water(self):
        # 水を提供する
        return "水"

# アダプタークラス
class AnimalWaterAdapter(Animal):
    # Animalクラスを継承したアダプタークラス

    def __init__(self, water_source): # 水源を引数に取る
        self.water_source = water_source # 水源オブジェクト

    def drink(self): # waterを引数に取らない
        return self.water_source.provide_water() # 水源から水を取得し飲む

# クライアントコード
def water_distribution(animal: Animal, water): # 動物と水を引数に取る
    animal.drink(water)

# 使用方法
source = WaterSource() # 水源オブジェクトを作成
adapter = AnimalWaterAdapter(source) # アダプターを作成
water_distribution(adapter, "水") # アダプターを使って水を配る
```

動物たちは、それぞれの種が独自の方法で水を飲んでいることに気付きました。そこで、それぞれの飲み方を変えずに水を飲める共通のシステムが必要になりました。そこで登場したのが、Adapterパターンです。

Adapterパターンは、互換性のない2つのインタフェースの間のギャップを埋めるのに役立つ構造設計パターンです。ジャングルでは、既存の`Animal`クラスには`drink`メソッドがあり、新しい`WaterSource`クラスには`provide_water`メソッドがありました。動物たちは、既存の飲む動作を変更することなく、水源を利用するためのアダプタを必要としていました。

## アダプタの実装
この問題を解決するために、`Animal`クラスを継承した`AnimalWaterAdapter`クラスを作成しました。このアダプタは、`WaterSource`オブジェクトを引数に取り、`drink`メソッドを実装しました。`drink`メソッドの内部では、`WaterSource`オブジェクトから`provide_water`メソッドを呼び出しています。

## すべての動物に水を配る
動物たちは、`water_distribution`関数を使うことで、動物たち独自の飲み方に関係なく、すべての動物に水を供給できるようになりました。クライアントコードは、水源の根本的な違いや、動物がどのように水を消費するかを意識する必要はありませんでした。アダプタがそれを処理してくれるので、水のぶん配に集中できるのです。

アダプタのパターンを導入したことで、ジャングルの動物たちは、みんなに効果的に水を配って干ばつを克服できました。アダプタ・パターンが彼らの違いを埋めてくれたおかげで、彼らはより暮らしやすくなり、調和して暮らし続けることができたのです。

## まとめ
この物語では、動物たちがこれまでの行動を変えることなく、新しい配水システムを利用できるようにすることで、アダプタのパターンが力を発揮しています。このパターンがあったからこそ、動物たちは違いを感じながらも共存し続け、ともに困難を乗り越えていくことができたのです。